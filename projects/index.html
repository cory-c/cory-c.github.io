<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.2.2" /><meta property="og:title" content="Projects" /><meta property="og:locale" content="en" /><meta name="description" content="Contract First API Template" /><meta property="og:description" content="Contract First API Template" /><link rel="canonical" href="https://cory-c.github.io/projects/" /><meta property="og:url" content="https://cory-c.github.io/projects/" /><meta property="og:site_name" content="Cory Coellen" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-07-31T22:23:17+00:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Projects" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-31T22:23:17+00:00","datePublished":"2022-07-31T22:23:17+00:00","description":"Contract First API Template","headline":"Projects","mainEntityOfPage":{"@type":"WebPage","@id":"https://cory-c.github.io/projects/"},"url":"https://cory-c.github.io/projects/"}</script><title>Projects | Cory Coellen</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Cory Coellen"><meta name="application-name" content="Cory Coellen"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/img/HeadShot.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title mt-3"> <a href="/">Cory Coellen</a></div><div class="site-subtitle font-italic">Software Engineer focusing on .NET and Web technologies</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item active"> <a href="/projects/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>PROJECTS</span> </a><li class="nav-item"> <a href="/apidocs/" class="nav-link"> <i class="fa-fw fas fa-code ml-xl-3 mr-xl-3 unloaded"></i> <span>API DOCS</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-user ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/cory-c" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['cory.coellen','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/cory-coellen-603a1b113/" aria-label="linkedin" target="_blank" rel="noopener"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Projects</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Projects</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 class="dynamic-title"> Projects</h1><div class="post-content"><h1 id="contract-first-api-template">Contract First API Template</h1><h2 id="api-generation"><span class="mr-2">API Generation</span><a href="#api-generation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The template project enforces that the API is defined in the OpenAPI specification before code is implemented and ensures the contract is always up to date. Changing the exposed interface / contract requires updating the ServiceDefinition.yaml file first. At build time, the project reads from the ServiceDefinition.yaml file in the project root then generates request models, response models, interfaces and controller delegates for each endpoint in a single file called ControllerDelegates.cs. This file is not meant to be checked in, any changes in the ServiceDefinition.yaml are dynamically updated at build time.</p><h2 id="development-process"><span class="mr-2">Development Process</span><a href="#development-process" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h3 id="new-api"><span class="mr-2">New API</span><a href="#new-api" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://mermaid.live/edit#pako:eNqNkU1LAzEQhv_KkFOEFu-LFPplWVApreJlLzGZbqPZJGRnKaXtf3fSD6vowZySeR-emSE7oYNBUYg6qbiGh0Xlgc9QviZLCMN5CXdvaTAOnpLSdHOK-_0BjOQTbuAZm-gUk5map_COP6CxLH1Lyrm_wYxd4Ykch7iFS68MWk8B4i_tVI4668zRBV-ya76foMOau7VwC4-8oGuP7Aw9Ji6bPdzLkgfCBj0do9ITppXS2J77TE-m79OADtGigTxVfvNmZDUsN6quMb2UYGxL_1Bn8UwuOg_DGJ3VbAn-lImeaDA1yhr-k10uVYLW7KpEwVej0kclKn9grouGV5kaSyGJYqVciz2hOgrLrdeioNThBZpYxf_bnKnDJxrKomc"><img data-src="https://mermaid.ink/img/pako:eNqNkU1LAzEQhv_KkFOEFu-LFPplWVApreJlLzGZbqPZJGRnKaXtf3fSD6vowZySeR-emSE7oYNBUYg6qbiGh0Xlgc9QviZLCMN5CXdvaTAOnpLSdHOK-_0BjOQTbuAZm-gUk5map_COP6CxLH1Lyrm_wYxd4Ykch7iFS68MWk8B4i_tVI4668zRBV-ya76foMOau7VwC4-8oGuP7Aw9Ji6bPdzLkgfCBj0do9ITppXS2J77TE-m79OADtGigTxVfvNmZDUsN6quMb2UYGxL_1Bn8UwuOg_DGJ3VbAn-lImeaDA1yhr-k10uVYLW7KpEwVej0kclKn9grouGV5kaSyGJYqVciz2hOgrLrdeioNThBZpYxf_bnKnDJxrKomc" alt="" data-proofer-ignore></a></p><h3 id="updating-an-existing-api"><span class="mr-2">Updating an existing API</span><a href="#updating-an-existing-api" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p><a href="https://mermaid.live/edit#pako:eNpVkctqwzAQRX9l0MqBhO5NCfhRiqGFkJCdN4o0cdTKkhmNW0qSf68iO4Ts5nG4d7hzFsprFLloHQB0JIcTfGxTA0W2H7RkhGLTwOuB1pV3TFLxYt7DarWGMitHY3UCYEP-CyMAE1Em4lKjxS4KBXiBz2hnQ6Lf0SHFsb5AlTX9YLFHx9A4RjpKhRMFnoAwePuDcHg4IZGnsHjyud-XAOUHgxqMY3_rA0s2Cna_suuQ9g1oE_jZ-IY9zGfpKknX2XZ0UAyDNSrqeDdtxVL0SL00OiZ4vo1awaeo1oo8llrSdxuTvUZuTFG-acOeRH6UNuBSyJH97s8pkTONeIdqI-Mj-pm6_gNmZ4j_"><img data-src="https://mermaid.ink/img/pako:eNpVkctqwzAQRX9l0MqBhO5NCfhRiqGFkJCdN4o0cdTKkhmNW0qSf68iO4Ts5nG4d7hzFsprFLloHQB0JIcTfGxTA0W2H7RkhGLTwOuB1pV3TFLxYt7DarWGMitHY3UCYEP-CyMAE1Em4lKjxS4KBXiBz2hnQ6Lf0SHFsb5AlTX9YLFHx9A4RjpKhRMFnoAwePuDcHg4IZGnsHjyud-XAOUHgxqMY3_rA0s2Cna_suuQ9g1oE_jZ-IY9zGfpKknX2XZ0UAyDNSrqeDdtxVL0SL00OiZ4vo1awaeo1oo8llrSdxuTvUZuTFG-acOeRH6UNuBSyJH97s8pkTONeIdqI-Mj-pm6_gNmZ4j_" alt="" data-proofer-ignore></a></p><h2 id="installing-the-template"><span class="mr-2">Installing the Template</span><a href="#installing-the-template" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>The template can be used either by the dotnet CLI (dotnet new) or Visual Studio to create an new API project.</p><h3 id="general-info"><span class="mr-2">General Info</span><a href="#general-info" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>https://docs.microsoft.com/en-us/dotnet/core/tools/custom-templates</p><h3 id="installation"><span class="mr-2">Installation</span><a href="#installation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><p>From the ContractFirst.Api directory run: the following command:</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet new --install ./
</pre></table></code></div></div><h3 id="removing-template"><span class="mr-2">Removing Template</span><a href="#removing-template" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet new --uninstall cf-apils
</pre></table></code></div></div><h3 id="create-a-project-using-template"><span class="mr-2">Create a project using template</span><a href="#create-a-project-using-template" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h3><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>dotnet new ContractFirst.WebApi
</pre></table></code></div></div><h2 id="implementation"><span class="mr-2">Implementation</span><a href="#implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Once the ConrollerDelegates.cs file has been generated an implementation class needs to be provided and registered for each Interface. Take the following generated class, note the IPetController interface</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre>
<span class="k">public</span> <span class="k">partial</span> <span class="k">class</span> <span class="nc">PetController</span> <span class="p">:</span> <span class="n">Microsoft</span><span class="p">.</span><span class="n">AspNetCore</span><span class="p">.</span><span class="n">Mvc</span><span class="p">.</span><span class="n">ControllerBase</span>
<span class="p">{</span>
     <span class="k">private</span> <span class="n">IPetController</span> <span class="n">_implementation</span><span class="p">;</span>

     <span class="k">public</span> <span class="nf">PetController</span><span class="p">(</span><span class="n">IPetController</span> <span class="n">implementation</span><span class="p">)</span>
     <span class="p">{</span>
         <span class="n">_implementation</span> <span class="p">=</span> <span class="n">implementation</span><span class="p">;</span>
     <span class="p">}</span>

     <span class="c1">// truncated ....</span>

<span class="p">}</span>
</pre></table></code></div></div><p>Add a new class that implements all the methods defined in the IPetController interface.</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">public</span> <span class="k">class</span> <span class="nc">PetControllerImp</span> <span class="p">:</span> <span class="n">IPetConroller</span> <span class="p">{</span>

    <span class="c1">// Implement methods in interface</span>

<span class="p">}</span>

</pre></table></code></div></div><p>Then register the new class in the Program.cs file</p><div class="language-c# highlighter-rouge"><div class="code-header"> <span data-label-text="C#"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">builder</span><span class="p">.</span><span class="n">Services</span><span class="p">.</span><span class="n">AddScoped</span><span class="p">&lt;</span><span class="n">IPetController</span><span class="p">,</span> <span class="n">PetControllerImp</span><span class="p">&gt;();</span>
</pre></table></code></div></div><h2 id="swagger-ui"><span class="mr-2">Swagger UI</span><a href="#swagger-ui" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Included in the API project is a local distrobution of <a href="https://github.com/swagger-api/swagger-ui">Swagger UI</a> that is served as static content. On every build a copy of the ServiceDefinition.yaml is moved into the /wwwroot directory so any changes the the ServiceDefinition.yaml are reflected in the swagger page with running the application. The swagger page is availible at /swagger/index.html</p><h2 id="configuration"><span class="mr-2">Configuration</span><a href="#configuration" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h2 id="management-endpoints"><span class="mr-2">Management Endpoints</span><a href="#management-endpoints" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h2 id="distributed-tracing"><span class="mr-2">Distributed Tracing</span><a href="#distributed-tracing" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h2 id="running-locally"><span class="mr-2">Running Locally</span><a href="#running-locally" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Pre-Reqs, the following software needs to be installed: Java JDK, Docker, Git</p><h4 id="steps-to-run"><span class="mr-2">Steps to run:</span><a href="#steps-to-run" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h4><ol><li>Build Project<li>Open terminal, cd into /Resources/Config directory<li>Run setup-config.sh, pass -l local file location of config or -r remote github repo</ol><p><strong>Remote</strong></p><p><code class="language-plaintext highlighter-rouge">./setup-config.sh -r https://github.com/cory-c/TestConfig.git</code></p><p><strong>Local</strong></p><p><code class="language-plaintext highlighter-rouge">./setup-config.sh -r https://github.com/cory-c/TestConfig.git</code></p><p>Once config server is deployed and running, run the API project. The Swagger page will be availible at</p><p>https://localhost:7143/swagger/index.html</p><h2 id="service-discovery"><span class="mr-2">Service Discovery</span><a href="#service-discovery" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Coming soon</p><h2 id="client-code-generation"><span class="mr-2">Client Code Generation</span><a href="#client-code-generation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><h2 id="todo"><span class="mr-2">TODO</span><a href="#todo" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><ol><li>Get options monitor config working<li>Setup monitor admin endpoints. Update config / get config values<li>configure template / write instruction<li>Deploy to kubernetes<li>Service discovery (kubernetes)<li>Client Code generation<li>Endpoint to return config settings<li>Is config abstract for env? for implementation?</ol></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"></div></div></div><footer class="row pl-3 pr-3"><div class="col-12 d-flex justify-content-between align-items-center text-muted pl-0 pr-0"><div class="footer-left"><p class="mb-0"> © 2022 <a href="https://github.com/cory-c">Cory Coellen</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><script src="https://cdn.jsdelivr.net/npm/mermaid@8/dist/mermaid.min.js"></script> <script> $(function() { function updateMermaid(event) { if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { const mode = event.data.message; if (typeof mermaid === "undefined") { return; } let expectedTheme = (mode === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* Re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } let initTheme = "default"; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches ) ) { initTheme = "dark"; } let mermaidConf = { theme: initTheme /* <default|dark|forest|neutral> */ }; /* Markdown converts to HTML */ $("pre").has("code.language-mermaid").each(function() { let svgCode = $(this).children().html(); $(this).addClass("unloaded"); $(this).after(`<div class=\"mermaid\">${svgCode}</div>`); }); mermaid.initialize(mermaidConf); window.addEventListener("message", updateMermaid); }); </script><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script defer src="/assets/js/dist/page.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
